# agent.yaml - Enhanced with explicit session sharing configuration
server:
  host: 0.0.0.0
  port: 8000

# Add logging configuration to reduce noise
logging:
  level: "info"
  quiet_modules:
    # Core framework noise
    "asyncio": "WARNING"
    "uvicorn": "WARNING"
    "uvicorn.access": "WARNING"
    "fastapi": "WARNING"
    "httpx": "ERROR"
    
    # Google ADK noise - Enhanced coverage
    "google": "WARNING"
    "google.adk": "WARNING"
    "google.adk.models": "ERROR"
    "google.adk.models.registry": "ERROR"  # Stops "Updating LLM class" spam
    "google.adk.models.lite_llm": "ERROR"
    "google.adk.runners": "WARNING"
    "google.adk.sessions": "WARNING"
    "google.adk.artifacts": "WARNING"
    "google.adk.memory": "WARNING"
    "google.adk.agents": "WARNING"
    "google.genai": "WARNING"
    
    # LiteLLM noise
    "LiteLLM": "ERROR"
    "litellm": "ERROR"
    "litellm.utils": "ERROR"
    "litellm.llms": "ERROR"
    
    # CHUK modules - Reduce initialization verbosity
    "chuk_sessions": "WARNING"
    "chuk_sessions.session_manager": "WARNING"
    "chuk_ai_session_manager": "WARNING"
    "chuk_ai_session_manager.session_storage": "WARNING"
    "chuk_llm": "WARNING"
    "chuk_llm.configuration": "WARNING"
    "chuk_llm.configuration.unified_config": "WARNING"
    "chuk_llm.api": "WARNING"
    "chuk_llm.api.providers": "WARNING"  # Stops "Generated 561 provider functions"
    
    # A2A internal modules
    "a2a_server.transport": "WARNING"
    "a2a_server.transport.http": "WARNING"
    "a2a_server.session_store_factory": "WARNING"
    "a2a_server.tasks.handlers.session_aware_task_handler": "WARNING"
    "a2a_server.tasks.handlers.chuk": "WARNING"
    "a2a_server.tasks.handlers.chuk.chuk_agent": "WARNING"
    "a2a_server.tasks.handlers.chuk.chuk_agent_handler": "WARNING"
    "a2a_server.tasks.discovery": "WARNING"

handlers:
  use_discovery: false
  default_handler: perplexity_agent
  
  # Perplexity Agent with SSE MCP tools
  perplexity_agent:
    type: a2a_server.tasks.handlers.chuk.chuk_agent_handler.AgentHandler
    agent: a2a_server.sample_agents.perplexity_agent.perplexity_agent
    name: perplexity_agent
    agent_card:
      name: Perplexity Agent
      description: "Advanced research agent with Perplexity search capabilities"
      capabilities:
        tools: true
        streaming: true
      skills:
        - id: research
          name: Research
          description: "Deep research on any topic"
          tags: [research, search, perplexity]

  # Time Agent - MCP enabled with time tools
  time_agent:
    type: a2a_server.tasks.handlers.chuk.chuk_agent_handler.AgentHandler
    agent: a2a_server.sample_agents.time_agent.time_agent
    name: time_agent
    agent_card:
      name: Time Agent
      description: "Gets the current time in various timezones using MCP tools"
      version: "0.1.0"
      documentationUrl: "https://a2a-server.fly.dev/time_agent/docs"
      provider:
        organization: "chrishayuk"
        url: "https://chrishayuk.io"
      capabilities:
        streaming: true
        pushNotifications: false
        tools: true  # Indicates tool support
      authentication:
        schemes:
          - "None"
      defaultInputModes:
        - "text/plain"
      defaultOutputModes:
        - "text/plain"
      skills:
        - id: current-time
          name: Current Time
          description: "Get current time in any timezone"
          tags:
            - time
            - timezone
            - mcp
          examples:
            - "What time is it in Tokyo?"
            - "Current time in New York"
            - "What's the time difference between London and LA?"

  # Pirate Agent - ChukAgent-based pirate with explicit session sharing
  chuk_pirate:
    type: a2a_server.tasks.handlers.chuk.chuk_agent_handler.AgentHandler
    agent: a2a_server.sample_agents.chuk_pirate.pirate_agent
    name: chuk_pirate
    sandbox_id: "pirate_sessions"                    # ← Individual sandbox for isolation
    session_sharing: true                            # ← EXPLICIT: Enable cross-agent sharing
    shared_sandbox_group: "global_user_sessions"    # ← EXPLICIT: Shared group for memory
    agent_card:
      name: Pirate Agent
      description: "Captain Blackbeard's Ghost - legendary pirate with authentic swagger and maritime wisdom"
      version: "1.0.0"
      documentationUrl: "https://a2a-server.fly.dev/pirate_agent/docs"
      provider:
        organization: "chrishayuk"
        url: "https://chrishayuk.io"
      capabilities:
        streaming: true
        pushNotifications: false
        tools: false  # No MCP tools needed for this pirate
      authentication:
        schemes:
          - "None"
      defaultInputModes:
        - "text/plain"
      defaultOutputModes:
        - "text/plain"
      skills:
        - id: pirate-wisdom
          name: Pirate Wisdom
          description: "Authentic pirate advice, sea tales, and maritime knowledge"
          tags:
            - pirate
            - sailing
            - adventure
            - maritime
            - storytelling
          examples:
            - "Tell me a pirate tale"
            - "How do I navigate by the stars?"
            - "What's the best way to manage a ship's crew?"
            - "Share some pirate wisdom about treasure hunting"
            - "Teach me a sea shanty"

  # Pirate Agent - Google ADK based (kept for comparison, isolated)
  pirate_agent:
    type: a2a_server.tasks.handlers.adk.google_adk_handler.GoogleADKHandler
    agent: a2a_server.sample_agents.pirate_agent.pirate_agent
    name: pirate_agent
    use_sessions: false  # Explicit session control
    agent_card:
      name: Legacy Pirate Agent
      description: "Converts your text into authentic pirate-speak, arrr!"
      version: "0.1.0"
      documentationUrl: "https://a2a-server.fly.dev/legacy_pirate_agent/docs"
      provider:
        organization: "chrishayuk"
        url: "https://chrishayuk.io"
      capabilities:
        streaming: true
        pushNotifications: false
      authentication:
        schemes:
          - "None"
      defaultInputModes:
        - "text/plain"
      defaultOutputModes:
        - "text/plain"
      skills:
        - id: pirate-talk
          name: Pirate Talk
          description: "Transform any message into swashbuckling pirate lingo"
          tags:
            - pirate
            - fun
            - language
          examples:
            - "Turn this into pirate speak: Hello there!"
            - "Make this sound like a pirate: Good morning!"

  # Chef Agent - Google ADK based (keep for comparison, isolated)
  chef_agent:
    type: a2a_server.tasks.handlers.adk.google_adk_handler.GoogleADKHandler
    agent: a2a_server.sample_agents.chef_agent.chef_agent
    name: chef_agent
    use_sessions: true
    sandbox_id: "adk_chef_sessions"  # Separate from shared sessions
    agent_card:
      name: Chef Agent
      description: "Your culinary companion for recipe suggestions and cooking advice"
      version: "0.1.0"
      documentationUrl: "https://a2a-server.fly.dev/chef_agent/docs"
      provider:
        organization: "chrishayuk"
        url: "https://chrishayuk.io"
      capabilities:
        streaming: true
        pushNotifications: false
      authentication:
        schemes:
          - "None"
      defaultInputModes:
        - "text/plain"
      defaultOutputModes:
        - "text/plain"
      skills:
        - id: recipe-generation
          name: Recipe Generation
          description: "Create delicious recipes based on available ingredients"
          tags:
            - cooking
            - recipes
            - ingredients
          examples:
            - "What can I make with chicken, mushrooms, and rice?"
            - "Vegetarian recipe with spinach and cheese"
            - "Quick dessert with chocolate and bananas"

  # Chuk Chef Agent - ChukAgent-based chef with explicit session sharing
  chuk_chef:
    type: a2a_server.tasks.handlers.chuk.chuk_agent_handler.AgentHandler
    agent: a2a_server.sample_agents.chuk_chef.chef_agent
    name: chuk_chef
    sandbox_id: "chef_sessions"                     # ← Individual sandbox for isolation
    session_sharing: true                           # ← EXPLICIT: Enable cross-agent sharing
    shared_sandbox_group: "global_user_sessions"   # ← EXPLICIT: Same shared group as pirate
    agent_card:
      name: Chuk Chef Agent
      description: "Professional chef powered by ChukAgent with full LLM capabilities"
      version: "1.0.0"
      documentationUrl: "https://a2a-server.fly.dev/chuk_chef/docs"
      provider:
        organization: "chrishayuk"
        url: "https://chrishayuk.io"
      capabilities:
        streaming: true
        pushNotifications: false
        tools: false  # No MCP tools needed for this chef
      authentication:
        schemes:
          - "None"
      defaultInputModes:
        - "text/plain"
      defaultOutputModes:
        - "text/plain"
      skills:
        - id: gourmet-recipes
          name: Gourmet Recipe Creation
          description: "Create detailed, professional recipes with Chef Gourmet's expertise"
          tags:
            - cooking
            - recipes
            - gourmet
            - chef
            - professional
          examples:
            - "Chocolate chip cookie recipe"
            - "Italian pasta carbonara"
            - "How to make perfect risotto"
            - "Vegetarian lasagna recipe"
            - "What can I substitute for eggs in baking?"

  # Example: Agent with isolated sessions (for comparison)
  weather_agent:
    type: a2a_server.tasks.handlers.chuk.chuk_agent_handler.AgentHandler
    agent: a2a_server.sample_agents.weather_agent.weather_agent
    name: weather_agent
    sandbox_id: "weather_sessions"
    session_sharing: false                          # ← EXPLICIT: Disable sharing for privacy
    agent_card:
      name: Weather Agent
      description: "Provides weather forecasts and conditions using MCP tools"
      capabilities:
        tools: true
        streaming: true
      skills:
        - id: weather-forecast
          name: Weather Forecast
          description: "Get current weather and forecasts"
          tags: [weather, forecast, mcp]

  # Time Ticker - Demo streaming handler (no sessions)
  time_ticker:
    type: a2a_server.tasks.handlers.time_ticker_handler.TimeTickerHandler
    name: time_ticker
    agent_card:
      name: Time Ticker
      description: "Demonstrates streaming by showing current time for 10 seconds"
      version: "1.0.0"
      capabilities: 
        streaming: true
        pushNotifications: false
      defaultInputModes:
        - "text/plain"
      defaultOutputModes:
        - "text/plain"
      skills:
        - id: time-stream
          name: Time Stream
          description: "Stream current time updates"
          tags:
            - demo
            - streaming
            - time
          examples:
            - "Show me the time stream"
            - "Start time ticker"

  # Pirate Vision - Demo multimodal handler (no sessions)
  pirate_vision:
    type: a2a_server.tasks.handlers.pirate_vision_handler.PirateVisionHandler
    name: pirate_vision
    agent_card:
      name: Pirate Vision
      description: "Analyzes images and describes them in colorful pirate language"
      version: "1.0.0"
      capabilities: 
        streaming: true
        vision: true
      defaultInputModes:  
        - "image_base64"
        - "image/png"
        - "image/jpeg"
      defaultOutputModes: 
        - "text/plain"
      skills:
        - id: image-analysis
          name: Pirate Image Analysis
          description: "Describe images using pirate vocabulary and flair"
          tags:
            - vision
            - pirate
            - image-analysis
          examples:
            - "What do you see in this image, matey?"
            - "Describe this picture like a pirate"